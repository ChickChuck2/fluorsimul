(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&u(r)}).observe(document,{childList:!0,subtree:!0});function g(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(t){if(t.ep)return;t.ep=!0;const i=g(t);fetch(t.href,i)}})();const y=document.getElementById("start-btn"),S=document.getElementById("speed-btn"),b=document.getElementById("reset-btn"),a=document.getElementById("status-text"),D=document.getElementById("input-ppm"),m=document.getElementById("output-ppm"),h=document.getElementById("log"),l=document.getElementById("liquid-1"),c=document.getElementById("liquid-2"),L=document.getElementById("flow-intro"),O=document.getElementById("flow-stage1-2"),w=document.getElementById("flow-outro"),d=document.getElementById("result-indicator");let p=!1,s=1;const f={STAGE_1:900*1e3,STAGE_2:720*1e3,TEST:180*1e3},n=e=>{const o=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});h.innerHTML=`<div>[${o}] ${e}</div>`+h.innerHTML},E=(e,o)=>{D.innerHTML=`${e.toFixed(1)} <span style="font-size: 0.8rem; font-weight: 400;">ppm</span>`,o!==null?(m.innerHTML=`${o.toFixed(2)} <span style="font-size: 0.8rem; font-weight: 400;">ppm</span>`,m.style.color=o<1.5?"var(--fluoride-low)":"var(--fluoride-high)"):(m.innerHTML='-- <span style="font-size: 0.8rem; font-weight: 400;">ppm</span>',m.style.color="inherit")},A=(e,o)=>{switch(a.innerText=e,o){case"RODANDO":a.style.color="var(--accent-color)";break;case"SUCESSO":a.style.color="var(--success-color)";break;case"AGUARDANDO":a.style.color="var(--warning-color)";break;default:a.style.color="var(--text-secondary)"}},B=async()=>{p||(p=!0,y.disabled=!0,A("FILTRANDO...","RODANDO"),n("Passo 1: Cal adicionada. Tempo real estimado: 15 min."),L?.classList.add("active"),l&&(l.style.transition=`height ${3e3/s}ms ease-out, y ${3e3/s}ms ease-out`,l.setAttribute("height","180"),l.setAttribute("y","170")),await v(50,10,f.STAGE_1/s),n("Flúor caiu: 50 -> 10 ppm."),n("Passo 2: Polimento com Alumina. Tempo real estimado: 12 min."),O?.classList.add("active"),c&&(c.style.transition=`height ${3e3/s}ms ease-out, y ${3e3/s}ms ease-out`,c.setAttribute("height","180"),c.setAttribute("y","170")),await v(10,.82,f.STAGE_2/s),n("Água polida! Nível final: 0.82 ppm."),w?.classList.add("active"),n("Teste de Qualidade: O Rosa indica que está pura."),await new Promise(e=>setTimeout(e,f.TEST/2/s)),d&&(d.style.transition=`fill ${2e3/s}ms`,d.style.fill="var(--spadns-pink)"),await new Promise(e=>setTimeout(e,f.TEST/2/s)),A("PRONTO","SUCESSO"),n("RESULTADO: Água Aprovada (Rosa = Limpa)."),y.disabled=!1,p=!1)},v=(e,o,g)=>new Promise(u=>{let t=e;const i=Math.max(50,100/s),r=g/i,T=(o-e)/r,I=setInterval(()=>{t+=T,(T<0?t<=o:t>=o)?(clearInterval(I),E(50,o),u(!0)):E(50,t)},i)}),P=()=>{s===1?s=10:s===10?s=100:s===100?s=1e3:s=1,S.innerText=`ACELERAR (${s}x)`,n(`Velocidade ajustada para ${s}x`)},R=()=>{p=!1,y.disabled=!1,A("AGUARDANDO","AGUARDANDO"),E(50,null),n("Sistema reiniciado e pronto para novo ciclo."),[l,c].forEach(e=>{e&&(e.style.transition="none",e.setAttribute("height","0"),e.setAttribute("y","350"))}),[L,O,w].forEach(e=>e?.classList.remove("active")),d&&(d.style.fill="rgba(48, 54, 61, 0.5)")};y?.addEventListener("click",B);S?.addEventListener("click",P);b?.addEventListener("click",R);console.log("Simulation ready.");
