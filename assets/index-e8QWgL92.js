(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function p(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(e){if(e.ep)return;e.ep=!0;const s=p(e);fetch(e.href,s)}})();const f=document.getElementById("start-btn"),b=document.getElementById("reset-btn"),r=document.getElementById("status-text"),I=document.getElementById("input-ppm"),u=document.getElementById("output-ppm"),v=document.getElementById("log"),l=document.getElementById("liquid-1"),a=document.getElementById("liquid-2"),A=document.getElementById("flow-intro"),O=document.getElementById("flow-stage1-2"),L=document.getElementById("flow-outro"),c=document.getElementById("result-indicator");let m=!1;const n=t=>{const o=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"});v.innerHTML=`<div>[${o}] ${t}</div>`+v.innerHTML},y=(t,o)=>{I.innerHTML=`${t.toFixed(1)} <span style="font-size: 0.8rem; font-weight: 400;">ppm</span>`,o!==null?(u.innerHTML=`${o.toFixed(2)} <span style="font-size: 0.8rem; font-weight: 400;">ppm</span>`,u.style.color=o<1.5?"var(--fluoride-low)":"var(--fluoride-high)"):(u.innerHTML='-- <span style="font-size: 0.8rem; font-weight: 400;">ppm</span>',u.style.color="inherit")},g=(t,o)=>{switch(r.innerText=t,o){case"RODANDO":r.style.color="var(--accent-color)";break;case"SUCESSO":r.style.color="var(--success-color)";break;case"AGUARDANDO":r.style.color="var(--warning-color)";break;default:r.style.color="var(--text-secondary)"}},D=async()=>{m||(m=!0,f.disabled=!0,g("FILTRANDO...","RODANDO"),n("Passo 1: Cal adicionada. Removendo o grosso..."),A?.classList.add("active"),l&&(l.style.transition="height 3s ease-out, y 3s ease-out",l.setAttribute("height","180"),l.setAttribute("y","170")),await E(50,10,2e3),n("Flúor caiu: 50 -> 10 ppm."),n("Passo 2: Polimento com Alumina. pH em 6.0."),O?.classList.add("active"),a&&(a.style.transition="height 3s ease-out, y 3s ease-out",a.setAttribute("height","180"),a.setAttribute("y","170")),await E(10,.82,2500),n("Água polida! Nível final: 0.82 ppm."),L?.classList.add("active"),n("Teste de Qualidade: O Rosa indica que está pura."),await new Promise(t=>setTimeout(t,1500)),c&&(c.style.transition="fill 2s",c.style.fill="var(--spadns-pink)"),g("PRONTO","SUCESSO"),n("RESULTADO: Água Aprovada (Rosa = Limpa)."),f.disabled=!1,m=!1)},E=(t,o,p)=>new Promise(d=>{let e=t;const s=100,i=p/s,h=(o-t)/i,w=setInterval(()=>{e+=h,(h<0?e<=o:e>=o)?(clearInterval(w),y(50,o),d(!0)):y(50,e)},s)}),S=()=>{m=!1,f.disabled=!1,g("AGUARDANDO","AGUARDANDO"),y(50,null),n("Sistema reiniciado e pronto para novo ciclo."),[l,a].forEach(t=>{t&&(t.style.transition="none",t.setAttribute("height","0"),t.setAttribute("y","350"))}),[A,O,L].forEach(t=>t?.classList.remove("active")),c&&(c.style.fill="rgba(48, 54, 61, 0.5)")};f?.addEventListener("click",D);b?.addEventListener("click",S);console.log("Simulation ready.");
